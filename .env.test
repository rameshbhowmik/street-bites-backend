# ============================================
# SERVER CONFIGURATION
# ============================================
PORT=5000
NODE_ENV=development

# ============================================
# DEPLOYMENT MODE - IMPORTANT FOR OTP TESTING
# ============================================
# Options: development | test | production
# 
# development: OTPs logged to console (random codes)
# test: Fixed test OTP for deployment testing
# production: Real emails/SMS sent via Supabase
DEPLOYMENT_MODE=development

# Enable Test OTP Mode (for deployment testing)
# When true, all OTPs will use TEST_OTP value
USE_TEST_OTP=false

# Test OTP value (use same code for all requests)
# Only used when USE_TEST_OTP=true or DEPLOYMENT_MODE=test
TEST_OTP=123456

# ============================================
# DATABASE CONFIGURATION (MongoDB)
# ============================================
# Local MongoDB
MONGODB_URI=mongodb://localhost:27017/street-bites

# MongoDB Atlas (Production)
# MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/streetbites?retryWrites=true&w=majority

# ============================================
# JWT AUTHENTICATION
# ============================================
# JWT Secret Key (MUST CHANGE IN PRODUCTION!)
# Generate: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=dff3da96dffc452f5c3ff3fe92be4856b9a95958e834a4c79369a66d79b51e7ab7d0b9cf610c9d7003278de6e5a2e903368cab84a20ab0742c7189b72cd0f804

# Access Token Expiry
JWT_ACCESS_EXPIRE=15m

# Refresh Token Expiry
JWT_REFRESH_EXPIRE=7d
JWT_REFRESH_EXPIRE_DAYS=7

# ============================================
# SUPABASE CONFIGURATION (Optional for Development)
# ============================================
# Get from: https://supabase.com/dashboard/project/_/settings/api

# Leave empty for development mode (OTPs in console)
# Fill for production mode (real emails/SMS)

# Supabase Project URL
SUPABASE_URL=

# Supabase Service Role Key (Backend only - KEEP SECRET!)
SUPABASE_SERVICE_KEY=

# Supabase Anon Key (Frontend - Public)
SUPABASE_ANON_KEY=

# ============================================
# EMAIL CONFIGURATION
# ============================================
EMAIL_FROM_NAME=Street Bites
EMAIL_FROM_ADDRESS=noreply@streetbites.com

# ============================================
# TWO-FACTOR AUTHENTICATION (2FA)
# ============================================
TWO_FACTOR_APP_NAME=Street Bites
TWO_FACTOR_OTP_EXPIRE=5
TWO_FACTOR_BACKUP_CODES_COUNT=10

# ============================================
# SECURITY SETTINGS
# ============================================
MAX_LOGIN_ATTEMPTS=5
ACCOUNT_LOCK_DURATION=15
DEVICE_TRUST_EXPIRE_DAYS=90
SESSION_INACTIVITY_DAYS=30
PASSWORD_RESET_EXPIRE=15

# ============================================
# RATE LIMITING
# ============================================
STRICT_RATE_LIMIT_WINDOW_MS=900000
STRICT_RATE_LIMIT_MAX=5
MODERATE_RATE_LIMIT_WINDOW_MS=900000
MODERATE_RATE_LIMIT_MAX=100
IP_RATE_LIMIT_MAX=100

# ============================================
# FRONTEND URL (CORS)
# ============================================
CLIENT_URL=http://localhost:3000

# ============================================
# CLOUDINARY (Image Upload - Optional)
# ============================================
CLOUDINARY_CLOUD_NAME=dmmv32on6
CLOUDINARY_API_KEY=922677533674775
CLOUDINARY_API_SECRET=FWeMVYqOI02c94jGA_avnJ3s4-U

# ============================================
# PAYMENT GATEWAY (Future use)
# ============================================
RAZORPAY_KEY_ID=
RAZORPAY_KEY_SECRET=

# ============================================
# FILE UPLOAD LIMITS
# ============================================
MAX_FILE_SIZE=5242880
MAX_FILES=10

# ============================================
# LOGGING
# ============================================
LOG_LEVEL=info

# ============================================
# DEPLOYMENT SCENARIOS
# ============================================

# ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
# SCENARIO 1: LOCAL DEVELOPMENT
# ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
# NODE_ENV=development
# DEPLOYMENT_MODE=development
# USE_TEST_OTP=false
# SUPABASE_URL=         (empty)
# SUPABASE_SERVICE_KEY= (empty)
# 
# Result:
# ‚úÖ OTPs logged to console (random codes)
# ‚úÖ No external services needed
# ‚úÖ Perfect for local testing
# ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

# ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
# SCENARIO 2: DEPLOYMENT TESTING (Your Current Need)
# ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
# NODE_ENV=development
# DEPLOYMENT_MODE=test
# USE_TEST_OTP=true
# TEST_OTP=123456
# SUPABASE_URL=         (empty or configured)
# SUPABASE_SERVICE_KEY= (empty or configured)
# 
# Result:
# ‚úÖ All OTPs will be: 123456
# ‚úÖ Easy to test registration/login flow
# ‚úÖ No need to check console for different codes
# ‚úÖ Perfect for deployment testing
# ‚úÖ Frontend can use fixed OTP: 123456
# ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

# ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
# SCENARIO 3: STAGING/PRE-PRODUCTION
# ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
# NODE_ENV=production
# DEPLOYMENT_MODE=test
# USE_TEST_OTP=true
# TEST_OTP=999999
# SUPABASE_URL=https://xxx.supabase.co
# SUPABASE_SERVICE_KEY=eyJxxx...
# 
# Result:
# ‚úÖ Test OTP: 999999
# ‚úÖ Supabase configured but test mode
# ‚úÖ Good for QA testing
# ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

# ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
# SCENARIO 4: PRODUCTION (Live Users)
# ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
# NODE_ENV=production
# DEPLOYMENT_MODE=production
# USE_TEST_OTP=false
# SUPABASE_URL=https://xxx.supabase.co
# SUPABASE_SERVICE_KEY=eyJxxx...
# 
# Result:
# ‚úÖ Real OTPs sent via email/SMS
# ‚úÖ Supabase handles delivery
# ‚úÖ Production-ready
# ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

# ============================================
# QUICK START GUIDE
# ============================================
# 
# 1. Copy this file:
#    cp .env.example .env
# 
# 2. For Local Development:
#    - Leave defaults as is
#    - OTPs in console
# 
# 3. For Deployment Testing:
#    - Set DEPLOYMENT_MODE=test
#    - Set USE_TEST_OTP=true
#    - Use OTP: 123456 everywhere
# 
# 4. For Production:
#    - Generate strong JWT_SECRET
#    - Setup MongoDB Atlas
#    - Configure Supabase
#    - Set NODE_ENV=production
#    - Set DEPLOYMENT_MODE=production
# 
# ============================================
# SETUP SUPABASE (Optional - for Production)
# ============================================
# 
# 1. Create account: https://supabase.com
# 
# 2. Create new project
# 
# 3. Get API keys:
#    Settings > API
#    - Copy URL to SUPABASE_URL
#    - Copy service_role key to SUPABASE_SERVICE_KEY
# 
# 4. Configure Email:
#    Authentication > Email Templates
#    - Customize templates
# 
# 5. Configure SMS (Optional):
#    Authentication > Phone Auth
#    - Enable Phone provider
#    - Setup Twilio credentials
# 
# ============================================
# TESTING OTP FLOW
# ============================================
# 
# Development Mode:
# 1. Register user
# 2. Check console: "üì± DEV OTP for +91xxx: 123456"
# 3. Use that OTP to verify
# 
# Test Mode (Deployment):
# 1. Register user
# 2. Console shows: "üß™ TEST OTP for +91xxx: 123456"
# 3. Always use: 123456
# 4. No need to check console each time
# 
# Production Mode:
# 1. Register user
# 2. Real email/SMS sent
# 3. User receives actual OTP
# 
# ============================================
# TROUBLESHOOTING
# ============================================
# 
# Error: "phone_provider_disabled"
# Solution: This is normal if SMS not configured
#          Fallback to console works automatically
# 
# Error: "Supabase connection failed"
# Solution: Check SUPABASE_URL and SUPABASE_SERVICE_KEY
#          Or leave empty for development mode
# 
# Issue: Different OTP each time in dev
# Solution: Use DEPLOYMENT_MODE=test for fixed OTP
# 
# ============================================
# SECURITY NOTES
# ============================================
# 
# ‚ö†Ô∏è  NEVER commit .env to Git
# ‚ö†Ô∏è  Use strong JWT_SECRET in production
# ‚ö†Ô∏è  Disable TEST_OTP in production
# ‚ö†Ô∏è  Keep SUPABASE_SERVICE_KEY secret
# ‚ö†Ô∏è  Enable HTTPS in production
#