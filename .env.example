# ============================================
# SERVER CONFIGURATION
# ============================================
PORT=5000
NODE_ENV=development

# ============================================
# DATABASE CONFIGURATION (MongoDB)
# ============================================
# Local MongoDB
MONGODB_URI=mongodb://localhost:27017/street-bites

# MongoDB Atlas (Production)
# MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/streetbites?retryWrites=true&w=majority

# ============================================
# JWT AUTHENTICATION - PART 7 ENHANCED
# ============================================
# JWT Secret Key (MUST CHANGE IN PRODUCTION!)
# Generate: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=your_super_secret_jwt_key_make_it_very_long_and_complex_12345

# Access Token Expiry (short-lived for security)
JWT_ACCESS_EXPIRE=15m

# Refresh Token Expiry (stored in database)
JWT_REFRESH_EXPIRE=7d
JWT_REFRESH_EXPIRE_DAYS=7

# Legacy support
JWT_EXPIRE=7d

# ============================================
# SUPABASE CONFIGURATION
# ============================================
# Get from: https://supabase.com/dashboard/project/_/settings/api

# Supabase Project URL
SUPABASE_URL=https://your-project-ref.supabase.co

# Supabase Service Role Key (Backend only - KEEP SECRET!)
SUPABASE_SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.your_service_key_here

# Supabase Anon Key (Frontend - Public)
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.your_anon_key_here

# ============================================
# EMAIL CONFIGURATION (Supabase uses built-in email)
# ============================================
# Email sender details
EMAIL_FROM_NAME=Street Bites
EMAIL_FROM_ADDRESS=noreply@streetbites.com

# Alternative: Nodemailer (if not using Supabase)
# EMAIL_HOST=smtp.gmail.com
# EMAIL_PORT=587
# EMAIL_USER=your_email@gmail.com
# EMAIL_PASSWORD=your_gmail_app_password

# ============================================
# SMS/OTP CONFIGURATION
# ============================================
# Supabase uses Twilio for SMS by default
# Configure in Supabase Dashboard: Settings > Auth > SMS

# Alternative: Direct Twilio (if not using Supabase)
# TWILIO_ACCOUNT_SID=your_twilio_account_sid
# TWILIO_AUTH_TOKEN=your_twilio_auth_token
# TWILIO_PHONE_NUMBER=+1234567890

# Alternative: MSG91 (Popular in India)
# MSG91_API_KEY=your_msg91_api_key
# MSG91_SENDER_ID=STBITE
# MSG91_ROUTE=4

# ============================================
# TWO-FACTOR AUTHENTICATION (2FA)
# ============================================
# App name shown in Google Authenticator
TWO_FACTOR_APP_NAME=Street Bites

# OTP validity period
TWO_FACTOR_OTP_EXPIRE=5

# Number of backup codes to generate
TWO_FACTOR_BACKUP_CODES_COUNT=10

# ============================================
# SECURITY SETTINGS - PART 7
# ============================================
# Maximum failed login attempts before account lock
MAX_LOGIN_ATTEMPTS=5

# Account lock duration in minutes
ACCOUNT_LOCK_DURATION=15

# Device trust expiry (0 = never expires)
DEVICE_TRUST_EXPIRE_DAYS=90

# Session inactivity timeout
SESSION_INACTIVITY_DAYS=30

# Password reset token expiry (minutes)
PASSWORD_RESET_EXPIRE=15

# ============================================
# RATE LIMITING - PART 7
# ============================================
# Strict rate limit for sensitive endpoints (login, register)
STRICT_RATE_LIMIT_WINDOW_MS=900000
STRICT_RATE_LIMIT_MAX=5

# Moderate rate limit for general API
MODERATE_RATE_LIMIT_WINDOW_MS=900000
MODERATE_RATE_LIMIT_MAX=100

# IP-based rate limit
IP_RATE_LIMIT_MAX=100

# ============================================
# FRONTEND URL (CORS)
# ============================================
CLIENT_URL=http://localhost:3000

# Production (comma-separated for multiple domains)
# CLIENT_URL=https://streetbites.com,https://www.streetbites.com

# ============================================
# CLOUDINARY (Image Upload)
# ============================================
CLOUDINARY_CLOUD_NAME=your_cloudinary_cloud_name
CLOUDINARY_API_KEY=your_cloudinary_api_key
CLOUDINARY_API_SECRET=your_cloudinary_api_secret

# ============================================
# PAYMENT GATEWAY (Future use)
# ============================================
# Razorpay
RAZORPAY_KEY_ID=your_razorpay_key_id
RAZORPAY_KEY_SECRET=your_razorpay_key_secret

# ============================================
# FILE UPLOAD LIMITS
# ============================================
MAX_FILE_SIZE=5242880
MAX_FILES=10

# ============================================
# REDIS (Optional - for production caching)
# ============================================
# REDIS_URL=redis://localhost:6379
# REDIS_PASSWORD=your_redis_password

# ============================================
# GEOLOCATION SERVICE (Optional)
# ============================================
# For suspicious login detection
# IPSTACK_API_KEY=your_ipstack_api_key
# IPINFO_TOKEN=your_ipinfo_token

# ============================================
# PUSH NOTIFICATIONS (Optional)
# ============================================
# Firebase Cloud Messaging
# FCM_SERVER_KEY=your_fcm_server_key

# ============================================
# LOGGING
# ============================================
LOG_LEVEL=info

# ============================================
# SETUP INSTRUCTIONS
# ============================================
# 
# 1. Copy this file to .env:
#    cp .env.example .env
#
# 2. Update all values with your actual credentials
#
# 3. Generate a strong JWT_SECRET:
#    node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
#
# 4. Setup Supabase:
#    - Create project at https://supabase.com
#    - Get API keys from Project Settings > API
#    - Configure Email templates in Authentication > Email Templates
#    - Configure SMS in Authentication > Phone Auth (optional)
#
# 5. Never commit .env to Git:
#    - .env is already in .gitignore
#    - Use .env.example for documentation only
#
# 6. For Gmail (if using Nodemailer):
#    - Enable 2FA on your Gmail account
#    - Generate App Password at https://myaccount.google.com/apppasswords
#
# 7. For production:
#    - Use strong, unique passwords
#    - Use environment variables on hosting platform
#    - Enable all security features
#    - Use HTTPS only
#
# ============================================
# DEPENDENCIES TO INSTALL
# ============================================
#
# npm install:
# - jsonwebtoken (JWT tokens)
# - bcryptjs (password hashing)
# - speakeasy (2FA TOTP)
# - qrcode (2FA QR codes)
# - @supabase/supabase-js (email/SMS service)
# - express-rate-limit (rate limiting)
# - helmet (security headers)
# - cors (CORS handling)
# - dotenv (environment variables)
# - mongoose (MongoDB)
#
# ============================================
# TESTING IN DEVELOPMENT MODE
# ============================================
#
# When SUPABASE_URL or SUPABASE_SERVICE_KEY is not set:
# - OTPs will be logged to console instead of sending emails/SMS
# - Check terminal for OTP codes
# - Password reset links will be logged to console
# - 2FA setup details will be logged to console
#
# This allows testing without configuring external services
#